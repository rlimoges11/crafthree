<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ entry.title }}</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
{% block scene %}{% endblock %}
{% block scripts %}
    <script id="vertexShader" type="x-shader/x-vertex">
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
    </script>
    <script id="fragmentShader" type="x-shader/x-fragment">
			varying vec2 vUv;
			uniform float time;
			float r, g, b, a, d;
			vec4 c;
			uniform vec3 starColor;
			uniform float planetOrbitalDistances[9];
			{#uniform vec3 planetColors[9];#}
			uniform float planetColorsR[9], planetColorsG[9], planetColorsB[9];

			void main()	{
				vec2 p = -1.0 + 2.0 * vUv;
				d = sqrt(((p.x*p.x) + (p.y*p.y)))*16.0;

				r = starColor[0] - d;
				g = starColor[1] - d;
				b = 0.5 + starColor[2] - ((d/5.0)*2.0)/3.0;
				a = 0.5;

                for(int i=0;i<9;i++){
                    if(d*310.0 + 5.0 > planetOrbitalDistances[i] && d*310.0 - 5.0 < planetOrbitalDistances[i]){
                        r= planetColorsR[i-1];
                        g= planetColorsG[i-1];
                        b= planetColorsB[i-1];
                        a = 0.7;
                    }
                }

                {#float l = mod(p.x, 10.0) < 10.0 ? 1.0 : 0.0;#}
                {#r= r + l.0;#}
                {#g= g + l.0;#}
                {#b= b + l.0;#}

                if (b < 0.072) b = 0.072;
				gl_FragColor = vec4(r, g, b, a);
			}
    </script>
    <script src="/js/vendors/threejs/three.min.js"></script>
    <script src="/js/vendors/threejs/stats.min.js"></script>
    <script src="/js/vendors/threejs/Detector.js"></script>
    <script src="/js/vendors/threejs/systemControls.js"></script>
    <script src="/js/views/viewers/main.js"></script>
{% endblock %}
</body>
</html>